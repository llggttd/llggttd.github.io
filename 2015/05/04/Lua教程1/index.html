<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>Lua教程一 | CrazyMan</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="变量
动态类型， 变量无类型， 值才有类型
区分大小写
不要以’_大写字母’开头命名变量，这是lua 内部变量的全名规则
未初始化的变量的值为nil (demo)
多重赋值， 可以不对称 (demo)

##数据类型

共8种数据类型
都是一等公民，可以做作为参数， 也可以作为返回值

###number
数值类型， 1.2, 10等
lua 5.3之前， 无论是整形还是浮点运算时都转换成浮点型">
<meta property="og:type" content="article">
<meta property="og:title" content="Lua教程一">
<meta property="og:url" content="https://blog.crazyman.top/2015/05/04/Lua教程1/index.html">
<meta property="og:site_name" content="CrazyMan">
<meta property="og:description" content="变量
动态类型， 变量无类型， 值才有类型
区分大小写
不要以’_大写字母’开头命名变量，这是lua 内部变量的全名规则
未初始化的变量的值为nil (demo)
多重赋值， 可以不对称 (demo)

##数据类型

共8种数据类型
都是一等公民，可以做作为参数， 也可以作为返回值

###number
数值类型， 1.2, 10等
lua 5.3之前， 无论是整形还是浮点运算时都转换成浮点型">
<meta property="og:updated_time" content="2015-08-08T07:08:45.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Lua教程一">
<meta name="twitter:description" content="变量
动态类型， 变量无类型， 值才有类型
区分大小写
不要以’_大写字母’开头命名变量，这是lua 内部变量的全名规则
未初始化的变量的值为nil (demo)
多重赋值， 可以不对称 (demo)

##数据类型

共8种数据类型
都是一等公民，可以做作为参数， 也可以作为返回值

###number
数值类型， 1.2, 10等
lua 5.3之前， 无论是整形还是浮点运算时都转换成浮点型">
  
    <link rel="alternative" href="atom.xml" title="CrazyMan" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
<!--   <link href="//fonts.useso.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css"> -->
  <link rel="stylesheet" href="/css/style.css" type="text/css">
  

</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">CrazyMan</a>
      </h1>
      
        <h3 id="subtitle-wrap">
          <p id="subtitle">NOTHING IS TRUE</p>
        </h2>
        <h3 id="subtitle-wrap">
          <p id="subtitle">EVERYTHING IS PERMITTED</p>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/index.html">首页</a>
        
          <a class="main-nav-link" href="/archives">存档</a>
        
          <a class="main-nav-link" href="/about">关于</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="atom.xml" title="RSS Feed"></a>
        
      </nav>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main"><article id="post-Lua教程1" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2015/05/04/Lua教程1/" class="article-date">
  <time datetime="2015-05-04T14:38:09.000Z" itemprop="datePublished">2015-05-04</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/语言/">语言</a>►<a class="article-category-link" href="/categories/语言/LUA/">LUA</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      Lua教程一
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="变量">变量</h2><ul>
<li>动态类型， 变量无类型， 值才有类型</li>
<li>区分大小写</li>
<li>不要以’_大写字母’开头命名变量，这是lua 内部变量的全名规则</li>
<li>未初始化的变量的值为nil (demo)</li>
<li>多重赋值， 可以不对称 (demo)</li>
</ul>
<p>##数据类型</p>
<ul>
<li>共8种数据类型</li>
<li>都是一等公民，可以做作为参数， 也可以作为返回值</li>
</ul>
<p>###number</p>
<pre><code>数值类型， <span class="number">1.2</span>, <span class="number">10</span>等
lua <span class="number">5.3</span>之前， 无论是整形还是浮点运算时都转换成浮点型
</code></pre><p>###string</p>
<pre><code><span class="string">"hello"</span>, <span class="string">"hello\n world"</span>
</code></pre><p>###boolean</p>
<pre><code><span class="literal">true</span>, <span class="literal">false</span>
只有nil, <span class="literal">false</span>的值为假，其它值都为正
*注意: <span class="number">0</span>， <span class="string">""</span>， {}的值都是<span class="literal">true</span>*
</code></pre><p>###table</p>
<pre><code>存储键、值对，
{
    key = value,
    key = value,
    ...
}
键可以为除了nil以外的其它任意类型
当键对应的值为nil时，这对键值会被忽略


<span class="comment"><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">info = &#123;</span><br><span class="line">    name = <span class="string">"uniflor"</span>,</span><br><span class="line">    <span class="number">4</span> = <span class="string">"TianJin"</span>,</span><br><span class="line">    callback = <span class="function"><span class="keyword">function</span><span class="params">()</span></span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">"ok"</span>)</span><br><span class="line">    <span class="keyword">end</span>,</span><br><span class="line">    status = <span class="keyword">true</span>,</span><br><span class="line">    size = &#123;</span><br><span class="line">        width = <span class="number">200</span>,</span><br><span class="line">        height = <span class="number">100</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></span>

*在对table进行遍历时，字符串索引的元素位置与书写的顺序无关*
</code></pre><p>###function</p>
<pre><code>*同其它语言中的函数*
*两种定义方式*
*参数可变，按顺序对应*
*可以返回多个值*

<span class="comment"><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">test</span><span class="params">()</span></span></span><br><span class="line">    <span class="keyword">local</span> a = <span class="number">1</span></span><br><span class="line">    <span class="keyword">local</span> b = <span class="number">2</span></span><br><span class="line">    <span class="keyword">return</span> a, b</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">local</span> test = <span class="function"><span class="keyword">function</span><span class="params">(x, y)</span></span></span><br><span class="line">    <span class="keyword">local</span> a = <span class="number">1</span> + x</span><br><span class="line">    <span class="keyword">local</span> b = <span class="number">2</span> + y</span><br><span class="line">    <span class="keyword">return</span> a, b</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure></span>
</code></pre><p>###nil</p>
<pre><code>定义变量，不赋值时，系统会自动赋值 <span class="keyword">nil</span>
变量没有值，变量未定义，记住写法，<span class="string">"nil"</span>
</code></pre><p>###userdata</p>
<pre><code>代表<span class="built_in">c</span>中内存的一块原生数据或指向原生数据的指针
</code></pre><p>###thread</p>
<pre><code>Lua中协程程序中的线程，与所运行的平台无关
</code></pre><p>与类型相关的方法：</p>
<pre><code>- <span class="typedef"><span class="keyword">type</span></span>
</code></pre><hr>
<h2 id="关键词">关键词</h2><pre><code>and       break     <span class="operator"><span class="keyword">do</span>        <span class="keyword">else</span>      elseif    <span class="keyword">end</span>
<span class="literal">false</span>     <span class="keyword">for</span>       <span class="keyword">function</span>  <span class="keyword">goto</span>      <span class="keyword">if</span>        <span class="keyword">in</span>
<span class="keyword">local</span>     nil       <span class="keyword">not</span>       <span class="keyword">or</span>        <span class="keyword">repeat</span>    <span class="keyword">return</span>
<span class="keyword">then</span>      <span class="literal">true</span>      <span class="keyword">until</span>     <span class="keyword">while</span></span>
</code></pre><h2 id="语法标记">语法标记</h2><pre><code>+     -     *     /     %     ^     #
&amp;     ~     |     &lt;&lt;    &gt;&gt;    //
<span class="header">==    ~=    &lt;=    &gt;=    &lt;     &gt;     =</span>
<span class="bullet">(     )     {     }     [     ]     ::
</span>;     :     ,     .     ..    ...
</code></pre><p><em>与其它语言不同的地方：</em></p>
<ul>
<li>//</li>
<li>~=</li>
<li>#</li>
<li>..</li>
<li>…</li>
</ul>
<h2 id="运算符">运算符</h2><ul>
<li>+: 加</li>
<li>-: 减</li>
<li>*: 乘</li>
<li>/: 除</li>
<li>//: 取商运算</li>
<li>%: 取余运算</li>
<li>^: 乘方</li>
<li>-: 一元减</li>
</ul>
<h2 id="逻辑运算">逻辑运算</h2><ul>
<li>and 逻辑与</li>
<li>or  逻辑或</li>
<li>not 逻辑非</li>
</ul>
<p><em>没有&amp;&amp;, ||, !操作符</em></p>
<ul>
<li>==: 相等 先判断类型是否相同，再判断值是否相同</li>
<li>~=: 不相等</li>
<li>&lt;: 小于</li>
<li>>: 大于</li>
<li>&lt;=: 小于等于</li>
<li>>=: 大于等于</li>
</ul>
<figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> id &gt;= <span class="number">10</span> <span class="keyword">and</span> price &lt;<span class="number">5</span> <span class="keyword">then</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">""</span>)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">local</span> exist = <span class="keyword">false</span></span><br><span class="line"><span class="keyword">if</span> <span class="keyword">not</span> exist <span class="keyword">then</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"do not exist"</span>)</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<h2 id="流程控制">流程控制</h2><ul>
<li><p>if-else-end 结构</p>
<p>  <em>注意语句体前面的then，这与java, C不同</em></p>
  <figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">local</span> a</span><br><span class="line"><span class="keyword">if</span> a &gt; <span class="number">100</span> <span class="keyword">then</span></span><br><span class="line">    ...</span><br><span class="line"><span class="keyword">elseif</span> a &gt; <span class="number">50</span> <span class="keyword">then</span></span><br><span class="line">    ...</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">    ...</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>while-do-end 结构</p>
<p>  <em>在while-do-end中可以使用break跳出循环，但没有continue语句</em></p>
  <figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">local</span> a = <span class="number">10</span></span><br><span class="line"><span class="keyword">while</span> a &gt; <span class="number">0</span> <span class="keyword">do</span></span><br><span class="line">    ...</span><br><span class="line">    a = a - <span class="number">1</span></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>repeat-until 结构</p>
<p>  <em>在repeat-until中，until之后的表达式与repeat中的语句在一个语句体中，所以在until中可以引用repeat中语句块的局部变量, 而在while-do-end结构中不行</em></p>
  <figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">local</span> u = <span class="number">10</span></span><br><span class="line"><span class="keyword">repeat</span></span><br><span class="line">    ...</span><br><span class="line">    u = u - <span class="number">1</span></span><br><span class="line"><span class="keyword">until</span> u &lt; <span class="number">0</span></span><br></pre></td></tr></table></figure>
  <figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">local</span> u = <span class="number">10</span></span><br><span class="line"><span class="keyword">repeat</span></span><br><span class="line">    <span class="keyword">local</span> j = u</span><br><span class="line">    u = u - <span class="number">1</span></span><br><span class="line">    <span class="built_in">print</span>(j)</span><br><span class="line"><span class="keyword">until</span> j &lt; <span class="number">0</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>for-do-end 结构</p>
<p>  <em>第一个参数是起始值</em><br>  <em>第二个参数是终止值</em><br>  <em>第三个参数是步进值, 可以省略，默认为1</em><br>  <em>循环变量前虽没有local修饰，但也是for-do-end语句体中的局部变量</em></p>
  <figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> i = <span class="number">1</span>, <span class="number">10</span>, <span class="number">3</span> <span class="keyword">do</span></span><br><span class="line">    <span class="built_in">print</span>(i)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="built_in">print</span>(i)</span><br></pre></td></tr></table></figure>
</li>
<li><p>for-in-do-end 结构</p>
<p>  <em>lua中两种table的遍历结构</em><br>  <em>ipairs()只遍历table中以数字为索引的元素</em><br>  <em>paires()遍历table中所有的元素</em></p>
  <figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">local</span> user = &#123;<span class="number">12</span>, <span class="number">14</span>, <span class="number">15</span>, name = <span class="string">"max"</span>&#125;</span><br><span class="line"><span class="keyword">for</span> i,v <span class="keyword">in</span> <span class="built_in">ipairs</span>(user) <span class="keyword">do</span></span><br><span class="line">    <span class="built_in">print</span>(i,v)</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
  <figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">local</span> user = &#123;<span class="number">12</span>, <span class="number">14</span>, <span class="number">15</span>, name = <span class="string">"max"</span>&#125;</span><br><span class="line"><span class="keyword">for</span> k,v <span class="keyword">in</span> <span class="built_in">pairs</span>(user) <span class="keyword">do</span></span><br><span class="line">    <span class="built_in">print</span>(k,v)</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
</li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://blog.crazyman.top/2015/05/04/Lua教程1/" data-id="cid2q09gs000znnarwpm7snln" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2015/05/04/Lua教程2/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          Lua教程二
        
      </div>
    </a>
  
  
    <a href="/2015/04/30/Apache-AutoIndex-美化/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">Apache AutoIndex 美化</div>
    </a>
  
</nav>

  
</article>

</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">分类</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Android/">Android</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/工具/">工具</a><span class="category-list-count">4</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/工具/Git/">Git</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/工具/SVN/">SVN</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/工具/rsync/">rsync</a><span class="category-list-count">1</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/服务器/">服务器</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/系统/">系统</a><span class="category-list-count">3</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/系统/Mac/">Mac</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/系统/Ubuntu/">Ubuntu</a><span class="category-list-count">2</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/语言/">语言</a><span class="category-list-count">3</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/语言/LUA/">LUA</a><span class="category-list-count">3</span></li></ul></li></ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">标签</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/apache/">apache</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/git/">git</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/git-server/">git server</a><span class="tag-list-count">1</span></li></ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">标签云</h3>
    <div class="widget tagcloud">
      <a href="/tags/apache/" style="font-size: 10px;">apache</a> <a href="/tags/git/" style="font-size: 10px;">git</a> <a href="/tags/git-server/" style="font-size: 10px;">git server</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">存档</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/06/">六月 2015</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/05/">五月 2015</a><span class="archive-list-count">13</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/04/">四月 2015</a><span class="archive-list-count">5</span></li></ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">最近</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2015/06/04/使用Unix日志/">使用Unix日志</a>
          </li>
        
          <li>
            <a href="/2015/06/03/unix下创建守护进程/">unix下创建守护进程</a>
          </li>
        
          <li>
            <a href="/2015/05/23/Mac下弹出气泡通知/">Mac下弹出气泡通知</a>
          </li>
        
          <li>
            <a href="/2015/05/23/Linux-Bridge/">Linux Bridge</a>
          </li>
        
          <li>
            <a href="/2015/05/21/SVN忽略文件/">SVN忽略文件</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      Copyright (C) 2015 Ozone, All Rights Reserved.<br>
      <a href="http://hexo.io/" target="_blank">Hexo</a>强力驱动
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/index.html" class="mobile-nav-link">首页</a>
  
    <a href="/archives" class="mobile-nav-link">存档</a>
  
    <a href="/about" class="mobile-nav-link">关于</a>
  
</nav>
    

<script src="/js/jquery-2.0.3.js" type="text/javascript"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css" type="text/css">
  <script src="/fancybox/jquery.fancybox.pack.js" type="text/javascript"></script>


<script src="/js/script.js" type="text/javascript"></script>

  </div>
</body>
</html>